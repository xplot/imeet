function init_app(){window.App={Models:{},Collections:{},Views:{},Router:{}},Backbone.pubSub=_.extend({},Backbone.Events),Backbone.pubSub.publish=Backbone.pubSub.trigger,Backbone.pubSub.subscribe=Backbone.pubSub.bind,Backbone.pubSub.unsubscribe=Backbone.pubSub.unbind,index_view=new IndexView({el:"#body-container"}),login_view=new SimpleView({el:"#view-container",templateId:"#login"}),user_register_view=new UserRegisterView({el:"#modal_container"}),register_view=new ModalView({el:"#modal_container",childView:user_register_view}),user_profile_view=new UserProfileView({el:"#modal_container"}),profile_view=new ModalView({el:"#modal_container",childView:user_profile_view}),create_invite_view=new CreateView({el:"#view-container"}),search_view=new SearchView({el:"#modal_container"}),search_view_modal=new ModalView({el:"#modal_container",childView:search_view}),invite_view=new InviteView({el:"#modal_container"}),invite_view_modal=new ModalView({el:$("#modal_container"),childView:invite_view}),App.Router=Backbone.Router.extend({routes:{"":"index","_=_":"index","new":"new","new/:title":"new","new/:title/from/:id":"new","new/from/:id":"new_no_title",search:"search",login:"login","profile/edit":"edit_profile",register:"register","view/:id":"view"},index:function(){index_view.render()},login:function(){login_view.render()},register:function(){register_view.render()},edit_profile:function(){profile_view.render()},"new":function(a,b){create_invite_view.render({title:a,id:b})},new_no_title:function(a){this.new(null,a)},search:function(){search_view_modal.render()},view:function(a){invite_view_modal.render({invite_id:a})}}),window.location.hash&&"#_=_"==window.location.hash&&(window.location.hash=""),new App.Router,Backbone.history.start({pushState:!0}),$("#notification-alerts").toggleClass("in"),$("body").on("click",".navigate",function(){var a=$(this).data("where");null!=a?Backbone.history.navigate(a,!0):Backbone.history.navigate("/",!0)}),$(".end-click").click(function(){$(".navbar-toggle:visible").click()}),$("body").on("input propertychange",".floating-label-form-group",function(a){$(this).toggleClass("floating-label-form-group-with-value",!!$(a.target).val())}).on("focus",".floating-label-form-group",function(){$(this).addClass("floating-label-form-group-with-focus")}).on("blur",".floating-label-form-group",function(){$(this).removeClass("floating-label-form-group-with-focus")})}$(function(){String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})}),jQuery.validator.addMethod("phoneUS",function(a,b){return a=a.replace(/\s+/g,""),this.optional(b)||a.length>9&&a.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)},"Please specify a valid phone number"),init_app()});